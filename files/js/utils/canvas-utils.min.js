"use strict";let twoPI=2*Math.PI;class DrawingUtils{constructor(t,e){this.canvas=t,this.ctx=e||t.getContext("2d")}clearRect(t,e,s,i){this.ctx.clearRect(t,e,s,i)}clear(){this.clearRect(0,0,this.canvas.width,this.canvas.height)}rect(t,e,s,i,h){this.ctx.fillStyle=t,this.ctx.fillRect(e,s,i,h)}circle(t,e,s,i,h){this.ctx.beginPath(),this.ctx.arc(e,s,i,0,twoPI),this.ctx.fillStyle=t,this.ctx.strokeStyle=t,h?(this.ctx.strokeWidth=h,this.ctx.stroke()):this.ctx.fill(),this.ctx.closePath()}line(t,e,s,i,h,a=3){this.ctx.beginPath(),this.ctx.lineWidth=a,this.ctx.strokeStyle=t,this.ctx.moveTo(e,s),this.ctx.lineTo(i,h),this.ctx.stroke(),this.ctx.closePath()}poly(t,e){this.ctx.beginPath(),this.ctx.moveTo(...e[0]),e.forEach((t,e)=>{0!=e&&this.ctx.lineTo(...t)}),this.ctx.closePath(),this.ctx.fillStyle=t,this.ctx.fill()}fill(t){this.rect(t,0,0,this.canvas.width,this.canvas.height)}image(t,e,s){this.ctx.drawImage(t,e,s)}}class CanvasUtils{constructor(t,e){this.canvas=t||document.createElement("canvas"),this.target_elm=e||this.canvas.parentNode||window.document.body,this.target_elm.contains(this.canvas)||this.target_elm.appendChild(this.canvas),this.canvas.width=this.target_elm.clientWidth,this.canvas.height=this.target_elm.clientHeight,this.canvas.style.width="100%",this.canvas.style.height="100%",this.events=[{name:"resize",callback:()=>{this.canvas.width=this.target_elm.clientWidth,this.canvas.height=this.target_elm.clientHeight}},],this.event_listeners={},this.addEventListeners(),this.draw=new DrawingUtils(this.canvas)}addEventListeners(){this.events.forEach(t=>{this.event_listeners[t.name]=this.canvas.addEventListener(t.name,t.callback)})}removeEventListeners(){this.events.forEach(t=>{this.canvas.removeEventListener(t.name,this.event_listeners[t.name])})}setTarget(t){this.removeEventListeners(),this.target_elm=t,this.addEventListeners()}}export default CanvasUtils;